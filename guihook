-- Remote Explorer Final Version

-- GUI lama hapus dulu biar ga dobel
if game.CoreGui:FindFirstChild("RemoteExplorer") then
    game.CoreGui.RemoteExplorer:Destroy()
end

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "RemoteExplorer"
gui.Parent = game.CoreGui
gui.ResetOnSpawn = false

-- Frame utama
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 420, 0, 260)
mainFrame.Position = UDim2.new(0.3, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui

-- Ujung atas (TitleBar)
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -60, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Remote Explorer"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleBar

-- Tombol minimize
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 30, 1, 0)
minimizeBtn.Position = UDim2.new(1, -60, 0, 0)
minimizeBtn.Text = "-"
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 20
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
minimizeBtn.Parent = titleBar

-- Tombol close
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 1, 0)
closeBtn.Position = UDim2.new(1, -30, 0, 0)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.BackgroundColor3 = Color3.fromRGB(150, 50, 50)
closeBtn.Parent = titleBar

-- Search bar
local searchBar = Instance.new("TextBox")
searchBar.Size = UDim2.new(1, -20, 0, 25)
searchBar.Position = UDim2.new(0, 10, 0, 40)
searchBar.PlaceholderText = "Search..."
searchBar.Text = ""
searchBar.Font = Enum.Font.SourceSans
searchBar.TextSize = 16
searchBar.TextColor3 = Color3.fromRGB(0, 0, 0)
searchBar.BackgroundColor3 = Color3.fromRGB(230, 230, 230)
searchBar.Parent = mainFrame

-- Scrolling list untuk scan
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, -20, 1, -110)
scrollFrame.Position = UDim2.new(0, 10, 0, 70)
scrollFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
scrollFrame.BorderSizePixel = 0
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollFrame.ScrollBarThickness = 6
scrollFrame.Parent = mainFrame

local layout = Instance.new("UIListLayout")
layout.Parent = scrollFrame
layout.SortOrder = Enum.SortOrder.LayoutOrder

-- Tombol bawah
local buttonBar = Instance.new("Frame")
buttonBar.Size = UDim2.new(1, -20, 0, 30)
buttonBar.Position = UDim2.new(0, 10, 1, -40)
buttonBar.BackgroundTransparency = 1
buttonBar.Parent = mainFrame

local clearBtn = Instance.new("TextButton")
clearBtn.Size = UDim2.new(0.3, -5, 1, 0)
clearBtn.Position = UDim2.new(0, 0, 0, 0)
clearBtn.Text = "Clear"
clearBtn.Font = Enum.Font.SourceSansBold
clearBtn.TextSize = 16
clearBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
clearBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
clearBtn.Parent = buttonBar

local copyAllBtn = Instance.new("TextButton")
copyAllBtn.Size = UDim2.new(0.3, -5, 1, 0)
copyAllBtn.Position = UDim2.new(0.35, 0, 0, 0)
copyAllBtn.Text = "Copy All"
copyAllBtn.Font = Enum.Font.SourceSansBold
copyAllBtn.TextSize = 16
copyAllBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
copyAllBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
copyAllBtn.Parent = buttonBar

local rescanBtn = Instance.new("TextButton")
rescanBtn.Size = UDim2.new(0.3, -5, 1, 0)
rescanBtn.Position = UDim2.new(0.7, 0, 0, 0)
rescanBtn.Text = "Rescan"
rescanBtn.Font = Enum.Font.SourceSansBold
rescanBtn.TextSize = 16
rescanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
rescanBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
rescanBtn.Parent = buttonBar

-- Frame untuk detail data
local dataFrame = Instance.new("Frame")
dataFrame.Size = UDim2.new(1, -20, 1, -80)
dataFrame.Position = UDim2.new(0, 10, 0, 60)
dataFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
dataFrame.Visible = false
dataFrame.Parent = mainFrame

local dataBox = Instance.new("TextBox")
dataBox.Size = UDim2.new(1, -20, 1, -60)
dataBox.Position = UDim2.new(0, 10, 0, 10)
dataBox.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
dataBox.TextColor3 = Color3.fromRGB(0, 255, 0)
dataBox.ClearTextOnFocus = false
dataBox.MultiLine = true
dataBox.TextXAlignment = Enum.TextXAlignment.Left
dataBox.TextYAlignment = Enum.TextYAlignment.Top
dataBox.TextSize = 14
dataBox.Font = Enum.Font.Code
dataBox.TextWrapped = false
dataBox.Text = ""
dataBox.Parent = dataFrame

local backBtn = Instance.new("TextButton")
backBtn.Size = UDim2.new(0.3, -5, 0, 30)
backBtn.Position = UDim2.new(0, 0, 1, -40)
backBtn.Text = "Back"
backBtn.Font = Enum.Font.SourceSansBold
backBtn.TextSize = 16
backBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
backBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
backBtn.Parent = dataFrame

local copyPathBtn = Instance.new("TextButton")
copyPathBtn.Size = UDim2.new(0.3, -5, 0, 30)
copyPathBtn.Position = UDim2.new(0.35, 0, 1, -40)
copyPathBtn.Text = "Copy Path"
copyPathBtn.Font = Enum.Font.SourceSansBold
copyPathBtn.TextSize = 16
copyPathBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
copyPathBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
copyPathBtn.Parent = dataFrame

-- Variabel
local remotes = {}

-- Fungsi buat scan remote
local function scanRemotes()
    scrollFrame:ClearAllChildren()
    layout.Parent = scrollFrame
    remotes = {}

    local function addRemote(obj, path)
        if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
            table.insert(remotes, path)

            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, -10, 0, 25)
            btn.Text = path
            btn.TextSize = 14
            btn.TextColor3 = Color3.fromRGB(255, 255, 255)
            btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            btn.Font = Enum.Font.SourceSans
            btn.Parent = scrollFrame

            btn.MouseButton1Click:Connect(function()
                scrollFrame.Visible = false
                searchBar.Visible = false
                buttonBar.Visible = false
                dataFrame.Visible = true
                dataBox.Text = "[Remote] " .. path .. "\nType: " .. obj.ClassName
                copyPathBtn.MouseButton1Click:Connect(function()
                    setclipboard(path)
                end)
            end)
        end
    end

    local function recurse(obj, path)
        for _, child in ipairs(obj:GetChildren()) do
            local newPath = path .. "." .. child.Name
            addRemote(child, newPath)
            recurse(child, newPath)
        end
    end

    recurse(ReplicatedStorage, "ReplicatedStorage")
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
end

-- Hubungkan tombol
rescanBtn.MouseButton1Click:Connect(scanRemotes)
clearBtn.MouseButton1Click:Connect(function()
    scrollFrame:ClearAllChildren()
    remotes = {}
end)
copyAllBtn.MouseButton1Click:Connect(function()
    if #remotes > 0 then
        setclipboard(table.concat(remotes, "\n"))
    end
end)
backBtn.MouseButton1Click:Connect(function()
    scrollFrame.Visible = true
    searchBar.Visible = true
    buttonBar.Visible = true
    dataFrame.Visible = false
end)

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

local minimized = false
minimizeBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    scrollFrame.Visible = not minimized
    searchBar.Visible = not minimized
    buttonBar.Visible = not minimized
    dataFrame.Visible = not minimized
    if minimized then
        mainFrame.Size = UDim2.new(0, 420, 0, 30)
    else
        mainFrame.Size = UDim2.new(0, 420, 0, 260)
    end
end)

-- Search filter
searchBar:GetPropertyChangedSignal("Text"):Connect(function()
    local query = string.lower(searchBar.Text)
    for _, child in ipairs(scrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child.Visible = (query == "" or string.find(string.lower(child.Text), query))
        end
    end
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
end)

-- Pertama kali scan
scanRemotes()
