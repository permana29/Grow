-- Remote Explorer Final Scroll Fix

-- buat ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "RemoteExplorer"
ScreenGui.Parent = game.CoreGui

-- buat main frame
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 500, 0, 300)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.Active = true
MainFrame.Draggable = true

-- Title
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, -80, 0, 30)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Text = "Remote Explorer"
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize
local Minimize = Instance.new("TextButton", MainFrame)
Minimize.Size = UDim2.new(0, 30, 0, 30)
Minimize.Position = UDim2.new(1, -60, 0, 0)
Minimize.Text = "-"
Minimize.TextColor3 = Color3.new(1,1,1)
Minimize.BackgroundColor3 = Color3.fromRGB(70,70,70)

-- Close
local Close = Instance.new("TextButton", MainFrame)
Close.Size = UDim2.new(0, 30, 0, 30)
Close.Position = UDim2.new(1, -30, 0, 0)
Close.Text = "X"
Close.TextColor3 = Color3.new(1,0,0)
Close.BackgroundColor3 = Color3.fromRGB(70,70,70)

-- Search bar
local Search = Instance.new("TextBox", MainFrame)
Search.Size = UDim2.new(1, -20, 0, 25)
Search.Position = UDim2.new(0, 10, 0, 35)
Search.PlaceholderText = "Search remote..."
Search.TextColor3 = Color3.new(1,1,1)
Search.BackgroundColor3 = Color3.fromRGB(60,60,60)

-- Scroll untuk list remote
local LogFrame = Instance.new("ScrollingFrame", MainFrame)
LogFrame.Size = UDim2.new(1, -20, 1, -110)
LogFrame.Position = UDim2.new(0, 10, 0, 65)
LogFrame.CanvasSize = UDim2.new(0,0,0,0)
LogFrame.ScrollBarThickness = 6
LogFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)

-- Layout otomatis
local UIList = Instance.new("UIListLayout", LogFrame)
UIList.SortOrder = Enum.SortOrder.LayoutOrder

-- ðŸ”¥ Update CanvasSize supaya scroll jalan
UIList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    LogFrame.CanvasSize = UDim2.new(0, 0, 0, UIList.AbsoluteContentSize.Y + 10)
end)

-- Tombol bawah
local RescanBtn = Instance.new("TextButton", MainFrame)
RescanBtn.Size = UDim2.new(0, 100, 0, 30)
RescanBtn.Position = UDim2.new(0, 10, 1, -40)
RescanBtn.Text = "Rescan"
RescanBtn.TextColor3 = Color3.new(1,1,1)
RescanBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local ClearBtn = Instance.new("TextButton", MainFrame)
ClearBtn.Size = UDim2.new(0, 100, 0, 30)
ClearBtn.Position = UDim2.new(0, 120, 1, -40)
ClearBtn.Text = "Clear"
ClearBtn.TextColor3 = Color3.new(1,1,1)
ClearBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local CopyAllBtn = Instance.new("TextButton", MainFrame)
CopyAllBtn.Size = UDim2.new(0, 100, 0, 30)
CopyAllBtn.Position = UDim2.new(0, 230, 1, -40)
CopyAllBtn.Text = "CopyAll"
CopyAllBtn.TextColor3 = Color3.new(1,1,1)
CopyAllBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

-- DETAIL FRAME
local DetailFrame = Instance.new("Frame", MainFrame)
DetailFrame.Size = UDim2.new(1, -20, 1, -60)
DetailFrame.Position = UDim2.new(0, 10, 0, 35)
DetailFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
DetailFrame.Visible = false

local DetailText = Instance.new("TextLabel", DetailFrame)
DetailText.Size = UDim2.new(1, -20, 1, -60)
DetailText.Position = UDim2.new(0, 10, 0, 10)
DetailText.TextColor3 = Color3.new(1,1,1)
DetailText.TextXAlignment = Enum.TextXAlignment.Left
DetailText.TextYAlignment = Enum.TextYAlignment.Top
DetailText.TextWrapped = true
DetailText.TextSize = 14
DetailText.BackgroundTransparency = 1

local BackBtn = Instance.new("TextButton", DetailFrame)
BackBtn.Size = UDim2.new(0, 80, 0, 30)
BackBtn.Position = UDim2.new(0, 10, 1, -40)
BackBtn.Text = "< Back"
BackBtn.TextColor3 = Color3.new(1,1,1)
BackBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local CopyBtn = Instance.new("TextButton", DetailFrame)
CopyBtn.Size = UDim2.new(0, 100, 0, 30)
CopyBtn.Position = UDim2.new(1, -110, 1, -40)
CopyBtn.Text = "Copy"
CopyBtn.TextColor3 = Color3.new(1,1,1)
CopyBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

-- Fungsi tampilkan data remote
local CurrentRemote
local function ShowData(obj)
    LogFrame.Visible = false
    DetailFrame.Visible = true
    CurrentRemote = obj
    DetailText.Text = "Name: " .. obj.Name .. "\nClass: " .. obj.ClassName .. "\nPath: " .. obj:GetFullName()
end

-- Fungsi rescan
local function Rescan()
    LogFrame:ClearAllChildren()
    for _, obj in ipairs(game:GetDescendants()) do
        if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
            if Search.Text == "" or string.find(string.lower(obj:GetFullName()), string.lower(Search.Text)) then
                local Btn = Instance.new("TextButton", LogFrame)
                Btn.Size = UDim2.new(1,-10,0,25)
                Btn.Text = obj:GetFullName()
                Btn.TextColor3 = Color3.new(1,1,1)
                Btn.BackgroundColor3 = Color3.fromRGB(55,55,55)
                Btn.TextWrapped = true
                Btn.MouseButton1Click:Connect(function()
                    ShowData(obj)
                end)
            end
        end
    end
end

-- Event tombol
RescanBtn.MouseButton1Click:Connect(Rescan)
ClearBtn.MouseButton1Click:Connect(function() LogFrame:ClearAllChildren() end)
CopyAllBtn.MouseButton1Click:Connect(function()
    local all = {}
    for _, child in ipairs(LogFrame:GetChildren()) do
        if child:IsA("TextButton") then
            table.insert(all, child.Text)
        end
    end
    setclipboard(table.concat(all, "\n"))
end)

BackBtn.MouseButton1Click:Connect(function()
    DetailFrame.Visible = false
    LogFrame.Visible = true
end)

CopyBtn.MouseButton1Click:Connect(function()
    if CurrentRemote then
        setclipboard(CurrentRemote:GetFullName())
    end
end)

-- Close / Minimize
Close.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)
Minimize.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

-- Update realtime filter search
Search:GetPropertyChangedSignal("Text"):Connect(Rescan)

-- ðŸ”¥ AUTO RESCAN saat GUI pertama kali muncul
Rescan()
