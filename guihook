-- Remote Explorer Final
-- GUI untuk scan dan lihat RemoteEvent / RemoteFunction di ReplicatedStorage

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer

-- GUI utama
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
ScreenGui.Name = "RemoteExplorer"

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 600, 0, 350)
MainFrame.Position = UDim2.new(0.5, -300, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = true

-- Title bar
local TitleBar = Instance.new("Frame", MainFrame)
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
TitleBar.BorderSizePixel = 0

local Title = Instance.new("TextLabel", TitleBar)
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 5, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "Remote Explorer"
Title.TextColor3 = Color3.new(1,1,1)
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize & Close
local Minimize = Instance.new("TextButton", TitleBar)
Minimize.Size = UDim2.new(0, 30, 1, 0)
Minimize.Position = UDim2.new(1, -60, 0, 0)
Minimize.Text = "-"
Minimize.BackgroundColor3 = Color3.fromRGB(60,60,60)
Minimize.TextColor3 = Color3.new(1,1,1)

local Close = Instance.new("TextButton", TitleBar)
Close.Size = UDim2.new(0, 30, 1, 0)
Close.Position = UDim2.new(1, -30, 0, 0)
Close.Text = "X"
Close.BackgroundColor3 = Color3.fromRGB(100,40,40)
Close.TextColor3 = Color3.new(1,1,1)

-- Search bar
local SearchBox = Instance.new("TextBox", MainFrame)
SearchBox.Size = UDim2.new(1, -10, 0, 25)
SearchBox.Position = UDim2.new(0, 5, 0, 35)
SearchBox.PlaceholderText = "Search..."
SearchBox.Text = ""
SearchBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SearchBox.TextColor3 = Color3.new(1,1,1)

-- List container
local Scrolling = Instance.new("ScrollingFrame", MainFrame)
Scrolling.Size = UDim2.new(1, -10, 1, -110)
Scrolling.Position = UDim2.new(0, 5, 0, 65)
Scrolling.BackgroundColor3 = Color3.fromRGB(20,20,20)
Scrolling.ScrollBarThickness = 6
Scrolling.AutomaticCanvasSize = Enum.AutomaticSize.Y
Scrolling.CanvasSize = UDim2.new(0,0,0,0)

local UIListLayout = Instance.new("UIListLayout", Scrolling)
UIListLayout.Padding = UDim.new(0,3)

-- Detail viewer
local DetailFrame = Instance.new("ScrollingFrame", MainFrame)
DetailFrame.Size = UDim2.new(1, -10, 1, -110)
DetailFrame.Position = UDim2.new(0, 5, 0, 65)
DetailFrame.BackgroundColor3 = Color3.fromRGB(20,20,20)
DetailFrame.ScrollBarThickness = 6
DetailFrame.Visible = false
DetailFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

local DetailText = Instance.new("TextLabel", DetailFrame)
DetailText.Size = UDim2.new(1, -10, 1, 0)
DetailText.Position = UDim2.new(0, 5, 0, 0)
DetailText.BackgroundTransparency = 1
DetailText.TextColor3 = Color3.new(1,1,1)
DetailText.TextXAlignment = Enum.TextXAlignment.Left
DetailText.TextYAlignment = Enum.TextYAlignment.Top
DetailText.TextWrapped = true
DetailText.TextSize = 14
DetailText.Text = ""
DetailText.RichText = true

-- Bottom buttons
local ButtonBar = Instance.new("Frame", MainFrame)
ButtonBar.Size = UDim2.new(1, -10, 0, 30)
ButtonBar.Position = UDim2.new(0, 5, 1, -35)
ButtonBar.BackgroundTransparency = 1

local function MakeButton(name, pos, text)
	local btn = Instance.new("TextButton", ButtonBar)
	btn.Size = UDim2.new(0, 100, 1, 0)
	btn.Position = UDim2.new(0, pos, 0, 0)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(60,60,60)
	btn.TextColor3 = Color3.new(1,1,1)
	return btn
end

local Rescan = MakeButton("Rescan", 0, "Rescan")
local Back = MakeButton("Back", 110, "< Back")
local CopyBtn = MakeButton("Copy", 220, "Copy")
local ClearBtn = MakeButton("Clear", 330, "Clear")

-- Logic
local Remotes = {}

local function GetRemotes()
	Remotes = {}
	for _,v in ipairs(ReplicatedStorage:GetDescendants()) do
		if v:IsA("RemoteEvent") or v:IsA("RemoteFunction") then
			table.insert(Remotes, v)
		end
	end
end

local function ShowList()
	Scrolling:ClearAllChildren()
	UIListLayout.Parent = Scrolling
	for _,remote in ipairs(Remotes) do
		if SearchBox.Text == "" or string.find(remote.Name:lower(), SearchBox.Text:lower()) then
			local btn = Instance.new("TextButton", Scrolling)
			btn.Size = UDim2.new(1, -10, 0, 25)
			btn.Text = remote:GetFullName()
			btn.BackgroundColor3 = Color3.fromRGB(70,70,70)
			btn.TextColor3 = Color3.new(1,1,1)

			btn.MouseButton1Click:Connect(function()
				local success, props = pcall(function()
					return remote:GetAttributes()
				end)

				local info = {}
				table.insert(info, "Name: " .. remote.Name)
				table.insert(info, "Class: " .. remote.ClassName)
				table.insert(info, "Path: " .. remote:GetFullName())
				table.insert(info, "\nProperties:")

				if success then
					local found = false
					for k,v in pairs(props) do
						found = true
						table.insert(info, string.format("  %s: %s", k, tostring(v)))
					end
					if not found then
						table.insert(info, "  Archivable: " .. tostring(remote.Archivable))
						table.insert(info, "  Parent: " .. (remote.Parent and remote.Parent.Name or "nil"))
					end
				else
					table.insert(info, "  Data tidak terbaca")
				end

				DetailText.Text = table.concat(info, "\n")
				Scrolling.Visible = false
				DetailFrame.Visible = true
			end)
		end
	end
end

-- Buttons
Rescan.MouseButton1Click:Connect(function()
	GetRemotes()
	ShowList()
end)

Back.MouseButton1Click:Connect(function()
	DetailFrame.Visible = false
	Scrolling.Visible = true
end)

CopyBtn.MouseButton1Click:Connect(function()
	if DetailFrame.Visible and DetailText.Text ~= "" then
		setclipboard(DetailText.Text)
	end
end)

ClearBtn.MouseButton1Click:Connect(function()
	DetailText.Text = ""
end)

Minimize.MouseButton1Click:Connect(function()
	MainFrame.Visible = not MainFrame.Visible
end)

Close.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

SearchBox.Changed:Connect(function(prop)
	if prop == "Text" then
		ShowList()
	end
end)

-- Init
GetRemotes()
ShowList()
