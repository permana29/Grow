--// Remote Scanner + Explorer with Working Search & Data Logs
local HttpService = game:GetService("HttpService")

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TitleBar = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local CloseButton = Instance.new("TextButton")
local MinimizeButton = Instance.new("TextButton")
local SearchBar = Instance.new("TextBox")
local TabFrame = Instance.new("Frame")
local RescanTab = Instance.new("ScrollingFrame")
local DataTab = Instance.new("ScrollingFrame")
local ButtonFrame = Instance.new("Frame")
local RescanButton = Instance.new("TextButton")
local ClearButton = Instance.new("TextButton")
local CopyButton = Instance.new("TextButton")
local BackButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

MainFrame.Parent = ScreenGui
MainFrame.Size = UDim2.new(0, 520, 0, 350)
MainFrame.Position = UDim2.new(0.5, -260, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Active = true
MainFrame.Draggable = true

TitleBar.Parent = MainFrame
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)

Title.Parent = TitleBar
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 5, 0, 0)
Title.Text = "Remote Explorer"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.BackgroundTransparency = 1

CloseButton.Parent = TitleBar
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.Text = "X"
CloseButton.BackgroundColor3 = Color3.fromRGB(100, 40, 40)
CloseButton.TextColor3 = Color3.new(1, 1, 1)

MinimizeButton.Parent = TitleBar
MinimizeButton.Size = UDim2.new(0, 30, 1, 0)
MinimizeButton.Position = UDim2.new(1, -60, 0, 0)
MinimizeButton.Text = "-"
MinimizeButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
MinimizeButton.TextColor3 = Color3.new(1, 1, 1)

SearchBar.Parent = MainFrame
SearchBar.Size = UDim2.new(1, -10, 0, 25)
SearchBar.Position = UDim2.new(0, 5, 0, 35)
SearchBar.PlaceholderText = "Search..."
SearchBar.Text = ""
SearchBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
SearchBar.TextColor3 = Color3.new(1,1,1)

TabFrame.Parent = MainFrame
TabFrame.Size = UDim2.new(1, -10, 1, -100)
TabFrame.Position = UDim2.new(0, 5, 0, 65)
TabFrame.BackgroundTransparency = 1

RescanTab.Parent = TabFrame
RescanTab.Size = UDim2.new(1, 0, 1, 0)
RescanTab.CanvasSize = UDim2.new(0, 0, 0, 0)
RescanTab.ScrollBarThickness = 6

DataTab.Parent = TabFrame
DataTab.Size = UDim2.new(1, 0, 1, 0)
DataTab.CanvasSize = UDim2.new(0, 0, 0, 0)
DataTab.ScrollBarThickness = 6
DataTab.Visible = false

ButtonFrame.Parent = MainFrame
ButtonFrame.Size = UDim2.new(1, -10, 0, 30)
ButtonFrame.Position = UDim2.new(0, 5, 1, -35)
ButtonFrame.BackgroundTransparency = 1

RescanButton.Parent = ButtonFrame
RescanButton.Size = UDim2.new(0.25, -5, 1, 0)
RescanButton.Text = "Rescan"
RescanButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
RescanButton.TextColor3 = Color3.new(1,1,1)

BackButton.Parent = ButtonFrame
BackButton.Size = UDim2.new(0.25, -5, 1, 0)
BackButton.Position = UDim2.new(0.25, 5, 0, 0)
BackButton.Text = "< Back"
BackButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
BackButton.TextColor3 = Color3.new(1,1,1)

CopyButton.Parent = ButtonFrame
CopyButton.Size = UDim2.new(0.25, -5, 1, 0)
CopyButton.Position = UDim2.new(0.5, 5, 0, 0)
CopyButton.Text = "Copy"
CopyButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
CopyButton.TextColor3 = Color3.new(1,1,1)

ClearButton.Parent = ButtonFrame
ClearButton.Size = UDim2.new(0.25, -5, 1, 0)
ClearButton.Position = UDim2.new(0.75, 5, 0, 0)
ClearButton.Text = "Clear"
ClearButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
ClearButton.TextColor3 = Color3.new(1,1,1)

-- Vars
local currentRemote = nil
local logs = {}

-- format args
local function formatArgs(args)
    local output = {}
    for i,v in ipairs(args) do
        local ok,encoded = pcall(function() return HttpService:JSONEncode(v) end)
        if ok then
            table.insert(output, "["..i.."] = " .. encoded)
        else
            table.insert(output, "["..i.."] = " .. tostring(v))
        end
    end
    return table.concat(output, "\n")
end

-- add log to DataTab
local function addLog(text)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -10, 0, 0)
    label.AutomaticSize = Enum.AutomaticSize.Y
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextYAlignment = Enum.TextYAlignment.Top
    label.BackgroundTransparency = 1
    label.TextWrapped = true
    label.TextColor3 = Color3.new(1,1,1)
    label.Font = Enum.Font.Code
    label.TextSize = 14
    label.Text = text
    label.Parent = DataTab
    DataTab.CanvasSize = UDim2.new(0, 0, 0, DataTab.CanvasSize.Y.Offset + label.TextBounds.Y + 10)
end

-- refresh remotes list
local function rescan()
    RescanTab:ClearAllChildren()
    local y = 0
    for _,desc in ipairs(game:GetDescendants()) do
        if desc:IsA("RemoteEvent") or desc:IsA("RemoteFunction") then
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, -10, 0, 25)
            btn.Position = UDim2.new(0, 5, 0, y)
            btn.Text = desc:GetFullName()
            btn.BackgroundColor3 = Color3.fromRGB(60,60,60)
            btn.TextColor3 = Color3.new(1,1,1)
            btn.TextXAlignment = Enum.TextXAlignment.Left
            btn.Parent = RescanTab
            btn.MouseButton1Click:Connect(function()
                currentRemote = desc
                DataTab:ClearAllChildren()
                logs = {}
                RescanTab.Visible = false
                DataTab.Visible = true
            end)
            y = y + 30
        end
    end
    RescanTab.CanvasSize = UDim2.new(0, 0, 0, y)
end

-- Hook __namecall
local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt,false)
mt.__namecall = newcclosure(function(self,...)
    local method = getnamecallmethod()
    if (method == "FireServer" or method == "InvokeServer") then
        local args = {...}
        if currentRemote == nil or self == currentRemote then
            local log = "["..method.."] "..self:GetFullName().."\n"..formatArgs(args).."\n----------------"
            addLog(log)
            table.insert(logs, log)
        end
    end
    return old(self,...)
end)
setreadonly(mt,true)

-- Buttons
RescanButton.MouseButton1Click:Connect(rescan)
BackButton.MouseButton1Click:Connect(function()
    RescanTab.Visible = true
    DataTab.Visible = false
end)
CopyButton.MouseButton1Click:Connect(function()
    if #logs > 0 then
        setclipboard(table.concat(logs, "\n"))
    end
end)
ClearButton.MouseButton1Click:Connect(function()
    DataTab:ClearAllChildren()
    logs = {}
    DataTab.CanvasSize = UDim2.new()
end)
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

local minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    MainFrame.Visible = not minimized
end)

-- Search filter
SearchBar:GetPropertyChangedSignal("Text"):Connect(function()
    local query = SearchBar.Text:lower()
    local y = 0
    for _,child in ipairs(RescanTab:GetChildren()) do
        if child:IsA("TextButton") then
            if query == "" or child.Text:lower():find(query) then
                child.Visible = true
                child.Position = UDim2.new(0, 5, 0, y)
                y = y + 30
            else
                child.Visible = false
            end
        end
    end
    RescanTab.CanvasSize = UDim2.new(0, 0, 0, y)
end)

-- run first scan
rescan()
