-- ðŸ“Œ Remote Explorer (Final Backup with Pretty Decode)

local Players = game:GetService("Players")
local RS = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer

-- Pretty decode (recursive)
local function prettyDecode(value, depth, indent)
    depth = depth or 0
    indent = indent or ""
    if depth > 3 then
        return indent .. "<Max Depth>"
    end

    local t = typeof(value)
    if t == "string" then
        return indent .. '"' .. value .. '"'
    elseif t == "number" or t == "boolean" then
        return indent .. tostring(value)
    elseif t == "table" then
        local str = indent .. "table: {"
        for k,v in pairs(value) do
            str = str .. "\n" .. indent .. "  ["..tostring(k).."] = " .. prettyDecode(v, depth+1, indent.."  ")
        end
        return str .. "\n" .. indent .. "}"
    elseif t == "Instance" then
        return indent .. '"' .. value:GetFullName() .. '"'
    else
        return indent .. '"' .. tostring(value) .. '"'
    end
end

-- GUI Builder
local function CreateWindow(title)
    local ScreenGui = Instance.new("ScreenGui", game.CoreGui)

    local Main = Instance.new("Frame")
    Main.Size = UDim2.new(0, 500, 0, 350)
    Main.Position = UDim2.new(0.25, 0, 0.25, 0)
    Main.BackgroundColor3 = Color3.fromRGB(25,25,25)
    Main.BorderSizePixel = 0
    Main.Active = true
    Main.Draggable = true
    Main.Parent = ScreenGui

    local Header = Instance.new("TextLabel")
    Header.Size = UDim2.new(1, -80, 0, 30)
    Header.BackgroundColor3 = Color3.fromRGB(35,35,35)
    Header.Text = title
    Header.TextColor3 = Color3.fromRGB(255,255,255)
    Header.Font = Enum.Font.GothamBold
    Header.TextSize = 14
    Header.TextXAlignment = Enum.TextXAlignment.Left
    Header.BorderSizePixel = 0
    Header.Parent = Main

    local Minimize = Instance.new("TextButton")
    Minimize.Size = UDim2.new(0,40,0,30)
    Minimize.Position = UDim2.new(1,-80,0,0)
    Minimize.Text = "-"
    Minimize.TextColor3 = Color3.new(1,1,1)
    Minimize.BackgroundColor3 = Color3.fromRGB(60,60,60)
    Minimize.Parent = Main

    local Close = Instance.new("TextButton")
    Close.Size = UDim2.new(0,40,0,30)
    Close.Position = UDim2.new(1,-40,0,0)
    Close.Text = "X"
    Close.TextColor3 = Color3.new(1,1,1)
    Close.BackgroundColor3 = Color3.fromRGB(100,50,50)
    Close.Parent = Main

    local Content = Instance.new("Frame")
    Content.Size = UDim2.new(1,0,1,-30)
    Content.Position = UDim2.new(0,0,0,30)
    Content.BackgroundTransparency = 1
    Content.Parent = Main

    local TabBar = Instance.new("Frame")
    TabBar.Size = UDim2.new(1, 0, 0, 25)
    TabBar.BackgroundColor3 = Color3.fromRGB(30,30,30)
    TabBar.BorderSizePixel = 0
    TabBar.Parent = Content

    local Pages = Instance.new("Frame")
    Pages.Size = UDim2.new(1,0,1,-25)
    Pages.Position = UDim2.new(0,0,0,25)
    Pages.BackgroundTransparency = 1
    Pages.Parent = Content

    local Tabs = {}
    local CurrentTab

    local function AddTab(name)
        local Button = Instance.new("TextButton")
        Button.Size = UDim2.new(0,120,1,0)
        Button.BackgroundColor3 = Color3.fromRGB(50,50,50)
        Button.Text = name
        Button.TextColor3 = Color3.new(1,1,1)
        Button.Font = Enum.Font.Gotham
        Button.TextSize = 12
        Button.Parent = TabBar

        local Page = Instance.new("Frame")
        Page.Size = UDim2.new(1,0,1,0)
        Page.BackgroundTransparency = 1
        Page.Visible = false
        Page.Parent = Pages

        Button.MouseButton1Click:Connect(function()
            if CurrentTab then CurrentTab.Visible = false end
            Page.Visible = true
            CurrentTab = Page
        end)

        Tabs[name] = Page
        if not CurrentTab then
            CurrentTab = Page
            Page.Visible = true
        end
        return Page
    end

    local Minimized = false
    Minimize.MouseButton1Click:Connect(function()
        Minimized = not Minimized
        if Minimized then
            Content.Visible = false
            Main.Size = UDim2.new(0,500,0,30)
        else
            Content.Visible = true
            Main.Size = UDim2.new(0,500,0,350)
        end
    end)

    Close.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    return AddTab
end

-- Main Window
local AddTab = CreateWindow("Remote Explorer")

-- ðŸ“Œ Rescan Tab
local ScanTab = AddTab("Rescan")

local Search = Instance.new("TextBox", ScanTab)
Search.Size = UDim2.new(1,-10,0,25)
Search.Position = UDim2.new(0,5,0,5)
Search.PlaceholderText = "Search Remote..."
Search.BackgroundColor3 = Color3.fromRGB(40,40,40)
Search.TextColor3 = Color3.new(1,1,1)

local RemoteList = Instance.new("ScrollingFrame", ScanTab)
RemoteList.Size = UDim2.new(1,-10,1,-40)
RemoteList.Position = UDim2.new(0,5,0,35)
RemoteList.BackgroundTransparency = 1
RemoteList.ScrollBarThickness = 6

local function RefreshRemotes()
    RemoteList:ClearAllChildren()
    local y = 0
    for _,v in ipairs(RS:GetDescendants()) do
        if v:IsA("RemoteEvent") or v:IsA("RemoteFunction") then
            if Search.Text == "" or v.Name:lower():find(Search.Text:lower()) then
                local Btn = Instance.new("TextButton")
                Btn.Size = UDim2.new(1,-10,0,25)
                Btn.Position = UDim2.new(0,5,0,y)
                Btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
                Btn.TextColor3 = Color3.new(1,1,1)
                Btn.Text = v:GetFullName()
                Btn.Parent = RemoteList

                Btn.MouseButton1Click:Connect(function()
                    -- buka Data Tab langsung
                    Tabs["Data"].Visible = true
                    for _,page in pairs(Tabs) do if page ~= Tabs["Data"] then page.Visible = false end end
                    CurrentTab = Tabs["Data"]

                    -- tampilkan detail properti
                    local log = "Name: "..v.Name.."\n"
                    log = log .. "Class: " .. v.ClassName .. "\n"
                    log = log .. "Path: " .. v:GetFullName() .. "\n\n"
                    log = log .. "Properties:"
                    pcall(function()
                        for _,prop in ipairs({"Archivable","Name","ClassName","Parent"}) do
                            local val = v[prop]
                            if typeof(val) == "Instance" then
                                val = val:GetFullName()
                            end
                            log = log .. "\n  "..prop..": "..tostring(val)
                        end
                    end)

                    DataLog:ClearAllChildren()
                    local Label = Instance.new("TextLabel")
                    Label.Size = UDim2.new(1,-10,0,0)
                    Label.AutomaticSize = Enum.AutomaticSize.Y
                    Label.BackgroundTransparency = 1
                    Label.TextXAlignment = Enum.TextXAlignment.Left
                    Label.TextYAlignment = Enum.TextYAlignment.Top
                    Label.TextWrapped = true
                    Label.TextColor3 = Color3.new(1,1,1)
                    Label.Font = Enum.Font.Code
                    Label.TextSize = 12
                    Label.Text = log
                    Label.Parent = DataLog
                    DataLog.CanvasSize = UDim2.new(0,0,0,Label.TextBounds.Y+20)
                end)

                y = y + 30
            end
        end
    end
    RemoteList.CanvasSize = UDim2.new(0,0,0,y)
end
Search:GetPropertyChangedSignal("Text"):Connect(RefreshRemotes)
RefreshRemotes()

-- ðŸ“Œ Data Tab
local DataTab = AddTab("Data")

local Toolbar = Instance.new("Frame", DataTab)
Toolbar.Size = UDim2.new(1,-10,0,25)
Toolbar.Position = UDim2.new(0,5,0,5)
Toolbar.BackgroundColor3 = Color3.fromRGB(35,35,35)

local CopyBtn = Instance.new("TextButton", Toolbar)
CopyBtn.Size = UDim2.new(0,60,1,0)
CopyBtn.Text = "Copy"
CopyBtn.TextColor3 = Color3.new(1,1,1)
CopyBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local ClearBtn = Instance.new("TextButton", Toolbar)
ClearBtn.Size = UDim2.new(0,60,1,0)
ClearBtn.Position = UDim2.new(0,65,0,0)
ClearBtn.Text = "Clear"
ClearBtn.TextColor3 = Color3.new(1,1,1)
ClearBtn.BackgroundColor3 = Color3.fromRGB(70,50,50)

local DataLog = Instance.new("ScrollingFrame", DataTab)
DataLog.Size = UDim2.new(1,-10,1,-40)
DataLog.Position = UDim2.new(0,5,0,35)
DataLog.BackgroundTransparency = 1
DataLog.ScrollBarThickness = 6

local Logs = {}

local function AddLog(remote, args)
    local msg = "["..remote.ClassName.."] "..remote:GetFullName().."\nData: {"
    for i,arg in ipairs(args) do
        msg = msg.."\n   ["..i.."] = "..prettyDecode(arg,0,"   ")
    end
    msg = msg.."\n}\n-----------------------"

    table.insert(Logs, msg)

    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(1,-10,0,0)
    Label.AutomaticSize = Enum.AutomaticSize.Y
    Label.BackgroundTransparency = 1
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.TextYAlignment = Enum.TextYAlignment.Top
    Label.TextWrapped = true
    Label.TextColor3 = Color3.new(1,1,1)
    Label.Font = Enum.Font.Code
    Label.TextSize = 12
    Label.Text = msg
    Label.Parent = DataLog

    DataLog.CanvasSize = UDim2.new(0,0,0,DataLog.CanvasSize.Y.Offset + Label.TextBounds.Y + 10)
end

CopyBtn.MouseButton1Click:Connect(function()
    setclipboard(table.concat(Logs, "\n"))
end)

ClearBtn.MouseButton1Click:Connect(function()
    Logs = {}
    DataLog:ClearAllChildren()
    DataLog.CanvasSize = UDim2.new(0,0,0,0)
end)

-- Hook Remotes
for _,v in ipairs(RS:GetDescendants()) do
    if v:IsA("RemoteEvent") then
        v.OnClientEvent:Connect(function(...)
            AddLog(v, {...})
        end)
    elseif v:IsA("RemoteFunction") then
        local old; old = hookfunction(v.InvokeClient, function(self,plr,...)
            AddLog(self, {...})
            return old(self,plr,...)
        end)
    end
end
