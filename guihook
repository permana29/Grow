-- Remote Scanner + Data Viewer Final
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- GUI utama
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "RemoteExplorer"

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0,400,0,300)
Main.Position = UDim2.new(0.5,-200,0.5,-150)
Main.BackgroundColor3 = Color3.fromRGB(35,35,35)
Main.Active = true
Main.Draggable = true

-- Header
local Header = Instance.new("Frame", Main)
Header.Size = UDim2.new(1,0,0,30)
Header.BackgroundColor3 = Color3.fromRGB(25,25,25)

local Title = Instance.new("TextLabel", Header)
Title.Size = UDim2.new(1,-60,1,0)
Title.Position = UDim2.new(0,5,0,0)
Title.Text = "Remote Explorer"
Title.TextColor3 = Color3.new(1,1,1)
Title.BackgroundTransparency = 1
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize
local MinBtn = Instance.new("TextButton", Header)
MinBtn.Size = UDim2.new(0,30,1,0)
MinBtn.Position = UDim2.new(1,-60,0,0)
MinBtn.Text = "_"
MinBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

-- Close
local CloseBtn = Instance.new("TextButton", Header)
CloseBtn.Size = UDim2.new(0,30,1,0)
CloseBtn.Position = UDim2.new(1,-30,0,0)
CloseBtn.Text = "X"
CloseBtn.BackgroundColor3 = Color3.fromRGB(120,50,50)

-- Kontainer tab
local ScanTab = Instance.new("Frame", Main)
ScanTab.Size = UDim2.new(1,0,1,-30)
ScanTab.Position = UDim2.new(0,0,0,30)
ScanTab.BackgroundTransparency = 1

local DataTab = Instance.new("Frame", Main)
DataTab.Size = ScanTab.Size
DataTab.Position = ScanTab.Position
DataTab.Visible = false
DataTab.BackgroundTransparency = 1

-- ================= SCANNER =================
local Search = Instance.new("TextBox", ScanTab)
Search.Size = UDim2.new(1,-10,0,25)
Search.Position = UDim2.new(0,5,0,5)
Search.PlaceholderText = "Search remote..."
Search.Text = ""
Search.BackgroundColor3 = Color3.fromRGB(50,50,50)
Search.TextColor3 = Color3.new(1,1,1)

local ToolBar = Instance.new("Frame", ScanTab)
ToolBar.Size = UDim2.new(1,-10,0,25)
ToolBar.Position = UDim2.new(0,5,0,35)
ToolBar.BackgroundTransparency = 1

local function makeBtn(parent, text, xPos)
    local b = Instance.new("TextButton", parent)
    b.Size = UDim2.new(0,60,1,0)
    b.Position = UDim2.new(0,xPos,0,0)
    b.Text = text
    b.BackgroundColor3 = Color3.fromRGB(60,60,60)
    b.TextColor3 = Color3.new(1,1,1)
    return b
end

local RescanBtn = makeBtn(ToolBar,"Rescan",0)
local ClearBtn = makeBtn(ToolBar,"Clear",65)
local CopyAllBtn = makeBtn(ToolBar,"CopyAll",130)

local LogFrame = Instance.new("ScrollingFrame", ScanTab)
LogFrame.Size = UDim2.new(1,-10,1,-65)
LogFrame.Position = UDim2.new(0,5,0,65)
LogFrame.BackgroundColor3 = Color3.fromRGB(45,45,45)
LogFrame.ScrollBarThickness = 6

local Layout = Instance.new("UIListLayout", LogFrame)
Layout.SortOrder = Enum.SortOrder.LayoutOrder
Layout.Padding = UDim.new(0,3)

-- ================= DATA TAB =================
local DataToolbar = Instance.new("Frame", DataTab)
DataToolbar.Size = UDim2.new(1,-10,0,25)
DataToolbar.Position = UDim2.new(0,5,0,5)
DataToolbar.BackgroundTransparency = 1

local BackBtn = makeBtn(DataToolbar,"‚Üê Back",0)
local CopyPathBtn = makeBtn(DataToolbar,"CopyPath",65)
local CopyDataBtn = makeBtn(DataToolbar,"CopyData",130)
local ClearDataBtn = makeBtn(DataToolbar,"Clear",195)

local DataLog = Instance.new("ScrollingFrame", DataTab)
DataLog.Size = UDim2.new(1,-10,1,-40)
DataLog.Position = UDim2.new(0,5,0,35)
DataLog.BackgroundColor3 = Color3.fromRGB(40,40,40)
DataLog.ScrollBarThickness = 6

local DataLayout = Instance.new("UIListLayout", DataLog)
DataLayout.SortOrder = Enum.SortOrder.LayoutOrder
DataLayout.Padding = UDim.new(0,3)

-- ================= LOGIC =================
local currentRemote = nil
local connections = {}

local function ShowData(remote)
    ScanTab.Visible = false
    DataTab.Visible = true
    currentRemote = remote
    DataLog:ClearAllChildren()
    local lbl = Instance.new("TextLabel", DataLog)
    lbl.Text = "Remote: "..remote:GetFullName().." ["..remote.ClassName.."]"
    lbl.Size = UDim2.new(1,-10,0,20)
    lbl.TextColor3 = Color3.new(1,1,0)
    lbl.BackgroundTransparency = 1

    -- hook panggilan remote
    for _,c in pairs(connections) do c:Disconnect() end
    connections = {}

    if remote:IsA("RemoteEvent") then
        table.insert(connections, remote.OnClientEvent:Connect(function(...)
            local args = {...}
            local log = Instance.new("TextLabel", DataLog)
            log.Text = "OnClientEvent: "..game.HttpService:JSONEncode(args)
            log.Size = UDim2.new(1,-10,0,20)
            log.TextColor3 = Color3.new(1,1,1)
            log.BackgroundTransparency = 1
        end))
    elseif remote:IsA("RemoteFunction") then
        table.insert(connections, remote.OnClientInvoke:Connect(function(...)
            local args = {...}
            local log = Instance.new("TextLabel", DataLog)
            log.Text = "OnClientInvoke: "..game.HttpService:JSONEncode(args)
            log.Size = UDim2.new(1,-10,0,20)
            log.TextColor3 = Color3.new(1,1,1)
            log.BackgroundTransparency = 1
        end))
    end
end

-- Rescan
local function Rescan()
    LogFrame:ClearAllChildren()
    for _, obj in ipairs(game:GetDescendants()) do
        if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
            local Btn = Instance.new("TextButton", LogFrame)
            Btn.Size = UDim2.new(1,-10,0,25)
            Btn.Text = obj:GetFullName()
            Btn.TextColor3 = Color3.new(1,1,1)
            Btn.BackgroundColor3 = Color3.fromRGB(55,55,55)
            Btn.MouseButton1Click:Connect(function()
                ShowData(obj)
            end)
        end
    end
end

RescanBtn.MouseButton1Click:Connect(Rescan)
ClearBtn.MouseButton1Click:Connect(function() LogFrame:ClearAllChildren() end)
CopyAllBtn.MouseButton1Click:Connect(function()
    local all = {}
    for _,child in ipairs(LogFrame:GetChildren()) do
        if child:IsA("TextButton") then table.insert(all, child.Text) end
    end
    setclipboard(table.concat(all,"\n"))
end)

BackBtn.MouseButton1Click:Connect(function()
    DataTab.Visible = false
    ScanTab.Visible = true
    for _,c in pairs(connections) do c:Disconnect() end
    connections = {}
end)

CopyPathBtn.MouseButton1Click:Connect(function()
    if currentRemote then
        setclipboard(currentRemote:GetFullName())
    end
end)

CopyDataBtn.MouseButton1Click:Connect(function()
    local lines = {}
    for _,child in ipairs(DataLog:GetChildren()) do
        if child:IsA("TextLabel") then table.insert(lines, child.Text) end
    end
    setclipboard(table.concat(lines,"\n"))
end)

ClearDataBtn.MouseButton1Click:Connect(function()
    DataLog:ClearAllChildren()
end)

-- Minimize / Close
local minimized = false
MinBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        Main.Size = UDim2.new(0,400,0,30)
    else
        Main.Size = UDim2.new(0,400,0,300)
    end
end)

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- auto start
Rescan()
