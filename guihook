-- ðŸ“Œ Remote Explorer (Rescan + Data Viewer + __namecall hook)

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local RS = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local SelectedRemote = nil
local Logs = {}

-- decode agar gampang dibaca
local function safeDecode(v, depth)
    depth = depth or 0
    if depth > 3 then return "<MaxDepth>" end
    local t = typeof(v)
    if t == "string" then
        return '"'..v..'"'
    elseif t == "Instance" then
        return "<"..v.ClassName.."> "..v:GetFullName()
    elseif t == "table" then
        local items = {}
        for k,val in pairs(v) do
            table.insert(items, "["..tostring(k).."] = "..safeDecode(val, depth+1))
        end
        return "{ "..table.concat(items,", ").." }"
    else
        return tostring(v)
    end
end

-- GUI builder sederhana
local function CreateWindow(title)
    local gui = Instance.new("ScreenGui", game.CoreGui)
    local main = Instance.new("Frame", gui)
    main.Size = UDim2.new(0,420,0,320)
    main.Position = UDim2.new(0.3,0,0.25,0)
    main.BackgroundColor3 = Color3.fromRGB(25,25,25)
    main.Active = true
    main.Draggable = true

    local header = Instance.new("TextLabel", main)
    header.Size = UDim2.new(1,-80,0,30)
    header.BackgroundColor3 = Color3.fromRGB(35,35,35)
    header.Text = title
    header.TextColor3 = Color3.new(1,1,1)
    header.Font = Enum.Font.GothamBold
    header.TextSize = 14
    header.TextXAlignment = Enum.TextXAlignment.Left

    local close = Instance.new("TextButton", main)
    close.Size = UDim2.new(0,40,0,30)
    close.Position = UDim2.new(1,-40,0,0)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.BackgroundColor3 = Color3.fromRGB(100,50,50)
    close.MouseButton1Click:Connect(function() gui:Destroy() end)

    local tabBar = Instance.new("Frame", main)
    tabBar.Size = UDim2.new(1,0,0,25)
    tabBar.Position = UDim2.new(0,0,0,30)
    tabBar.BackgroundColor3 = Color3.fromRGB(30,30,30)

    local content = Instance.new("Frame", main)
    content.Size = UDim2.new(1,0,1,-55)
    content.Position = UDim2.new(0,0,0,55)
    content.BackgroundTransparency = 1

    local tabs, current = {}, nil
    local function AddTab(name)
        local btn = Instance.new("TextButton", tabBar)
        btn.Size = UDim2.new(0,100,1,0)
        btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
        btn.Text = name
        btn.TextColor3 = Color3.new(1,1,1)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 12

        local page = Instance.new("Frame", content)
        page.Size = UDim2.new(1,0,1,0)
        page.BackgroundTransparency = 1
        page.Visible = false

        btn.MouseButton1Click:Connect(function()
            if current then current.Visible = false end
            page.Visible = true
            current = page
        end)

        tabs[name] = page
        if not current then
            page.Visible = true
            current = page
        end
        return page
    end

    return AddTab, tabs
end

-- buat window
local AddTab, Tabs = CreateWindow("Remote Explorer")

-- Tab Rescan
local ScanTab = AddTab("Rescan")
local Search = Instance.new("TextBox", ScanTab)
Search.Size = UDim2.new(1,-10,0,25)
Search.Position = UDim2.new(0,5,0,5)
Search.PlaceholderText = "Search Remote..."
Search.BackgroundColor3 = Color3.fromRGB(40,40,40)
Search.TextColor3 = Color3.new(1,1,1)

local RescanBtn = Instance.new("TextButton", ScanTab)
RescanBtn.Size = UDim2.new(0,80,0,25)
RescanBtn.Position = UDim2.new(1,-85,0,5)
RescanBtn.Text = "Rescan"
RescanBtn.TextColor3 = Color3.new(1,1,1)
RescanBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local RemoteList = Instance.new("ScrollingFrame", ScanTab)
RemoteList.Size = UDim2.new(1,-10,1,-40)
RemoteList.Position = UDim2.new(0,5,0,35)
RemoteList.BackgroundTransparency = 1
RemoteList.ScrollBarThickness = 6

-- Tab Data
local DataTab = AddTab("Data")

local Toolbar = Instance.new("Frame", DataTab)
Toolbar.Size = UDim2.new(1,-10,0,25)
Toolbar.Position = UDim2.new(0,5,0,5)
Toolbar.BackgroundColor3 = Color3.fromRGB(35,35,35)

local BackBtn = Instance.new("TextButton", Toolbar)
BackBtn.Size = UDim2.new(0,60,1,0)
BackBtn.Text = "< Back"
BackBtn.TextColor3 = Color3.new(1,1,1)
BackBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local CopyBtn = Instance.new("TextButton", Toolbar)
CopyBtn.Size = UDim2.new(0,60,1,0)
CopyBtn.Position = UDim2.new(0,65,0,0)
CopyBtn.Text = "Copy"
CopyBtn.TextColor3 = Color3.new(1,1,1)
CopyBtn.BackgroundColor3 = Color3.fromRGB(70,70,70)

local ClearBtn = Instance.new("TextButton", Toolbar)
ClearBtn.Size = UDim2.new(0,60,1,0)
ClearBtn.Position = UDim2.new(0,130,0,0)
ClearBtn.Text = "Clear"
ClearBtn.TextColor3 = Color3.new(1,1,1)
ClearBtn.BackgroundColor3 = Color3.fromRGB(70,50,50)

local DataLog = Instance.new("ScrollingFrame", DataTab)
DataLog.Size = UDim2.new(1,-10,1,-40)
DataLog.Position = UDim2.new(0,5,0,35)
DataLog.BackgroundTransparency = 1
DataLog.ScrollBarThickness = 6

local function ShowLog(remote,args)
    if remote ~= SelectedRemote then return end
    local msg = "["..remote.ClassName.."] "..remote.Name.." :"
    for i,arg in ipairs(args) do
        msg ..= "\n  ["..i.."] = "..safeDecode(arg)
    end
    msg ..= "\n--------------------"

    table.insert(Logs, msg)

    local label = Instance.new("TextLabel", DataLog)
    label.Size = UDim2.new(1,-10,0,0)
    label.AutomaticSize = Enum.AutomaticSize.Y
    label.BackgroundTransparency = 1
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextYAlignment = Enum.TextYAlignment.Top
    label.TextWrapped = true
    label.TextColor3 = Color3.new(1,1,1)
    label.Font = Enum.Font.Code
    label.TextSize = 12
    label.Text = msg

    DataLog.CanvasSize = UDim2.new(0,0,0,DataLog.CanvasSize.Y.Offset+label.TextBounds.Y+10)
end

BackBtn.MouseButton1Click:Connect(function()
    Tabs["Data"].Visible = false
    Tabs["Rescan"].Visible = true
end)
CopyBtn.MouseButton1Click:Connect(function()
    if setclipboard then setclipboard(table.concat(Logs,"\n")) end
end)
ClearBtn.MouseButton1Click:Connect(function()
    Logs = {}
    DataLog:ClearAllChildren()
    DataLog.CanvasSize = UDim2.new(0,0,0,0)
end)

-- Rescan function
local function RefreshRemotes()
    RemoteList:ClearAllChildren()
    local y = 0
    for _,v in ipairs(RS:GetDescendants()) do
        if v:IsA("RemoteEvent") or v:IsA("RemoteFunction") then
            if Search.Text=="" or v.Name:lower():find(Search.Text:lower()) then
                local btn = Instance.new("TextButton", RemoteList)
                btn.Size = UDim2.new(1,-10,0,25)
                btn.Position = UDim2.new(0,5,0,y)
                btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
                btn.TextColor3 = Color3.new(1,1,1)
                btn.Text = v:GetFullName()
                btn.TextXAlignment = Enum.TextXAlignment.Left

                btn.MouseButton1Click:Connect(function()
                    SelectedRemote = v
                    Logs = {}
                    DataLog:ClearAllChildren()
                    DataLog.CanvasSize = UDim2.new(0,0,0,0)
                    Tabs["Rescan"].Visible = false
                    Tabs["Data"].Visible = true
                end)

                y += 30
            end
        end
    end
    RemoteList.CanvasSize = UDim2.new(0,0,0,y)
end
RescanBtn.MouseButton1Click:Connect(RefreshRemotes)
Search:GetPropertyChangedSignal("Text"):Connect(RefreshRemotes)
RefreshRemotes()

-- hook __namecall
local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt,false)
mt.__namecall = newcclosure(function(self,...)
    local method = getnamecallmethod()
    if (method=="FireServer" or method=="InvokeServer") and (self:IsA("RemoteEvent") or self:IsA("RemoteFunction")) then
        ShowLog(self,{...})
    end
    return old(self,...)
end)
setreadonly(mt,true)
